---
import type { Post } from "@interfaces/data";
import PostCard from "@components/PostCard.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import BaseCard from "@components/BaseCard.astro";
import CardGroup from "@components/temple/CardGroup.astro";
import { t } from "@config";
import { Icon } from "astro-icon/components";

// 假设你有一个函数可以获取所有博客
import { getAllPosts } from "@utils/blogUtils"; // 请根据你的项目实际路径调整

// 这里获取全部博客（注意：不要加类型断言，交给类型推断）
const allBlogs = await getAllPosts();

// 只保留含有 Markdown 标签的博客
const tag = "Research";
const blogs = allBlogs.filter(blog => blog.data.tags && blog.data.tags.includes(tag));
---

<BaseLayout title="Research">
  <!-- 欢迎卡片 -->
  <BaseCard>
    <div class="space-y-6">
      <section class="py-4">
        <div class="flex flex-col items-center text-center">
          <h1
            class="text-4xl font-bold mb-4 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent leading-loose"
          >
            Hello! Welcome to Kevin ZOU's Research!
          </h1>
          <p class="text-xl text-base-content/80 max-w-3xl">
            Here, I will share my research work!
          </p>
        </div>
      </section>
    </div>
  </BaseCard>

  <CardGroup cols="1" gap="6">
    {
      blogs.map((blog) => (
        <PostCard
          title={blog.data.title}
          image={blog.data.image}
          description={blog.data.description}
          url={"/blog/" + blog.slug}
          pubDate={blog.data.pubDate}
          badge={blog.data.badge}
          categories={blog.data.categories}
          tags={blog.data.tags}
          word={blog.remarkPluginFrontmatter?.totalCharCount}
          time={blog.remarkPluginFrontmatter?.readingTime}
        />
      ))
    }
  </CardGroup>
  {/* 不需要分页组件 */}
</BaseLayout>